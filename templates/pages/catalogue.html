{% extends "base.html" %}

{% block title %}Catalogue - Yaad{% endblock %}

{% block content %}
<div class="px-4 sm:px-6 lg:px-10 xl:px-12 py-5 page-enter">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
            <h1 class="text-3xl font-bold text-white">Catalogue</h1>
            <p class="text-dark-400 mt-1">Your personal media library</p>
        </div>
        <a href="/add"
           preload="mouseover"
           class="inline-flex items-center justify-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            Add Media
        </a>
    </div>

    <!-- Catalogue content (tabs, filters, grid) - loaded as partial for HTMX -->
    {% include "partials/catalogue_content.html" %}
</div>

<script>
function toggleSortOrder(btn) {
    const currentOrder = btn.dataset.order;
    const newOrder = currentOrder === 'desc' ? 'asc' : 'desc';
    btn.dataset.order = newOrder;

    // Update the hidden input
    const hiddenInput = btn.closest('form').querySelector('input[name="sort_order"]');
    hiddenInput.value = newOrder;

    // Update the icon
    if (newOrder === 'desc') {
        btn.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4 4m0 0l4-4m-4 4V4"/>
        </svg>`;
    } else {
        btn.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"/>
        </svg>`;
    }

    // Trigger form submission
    htmx.trigger(btn.closest('form'), 'submit');
}
</script>
{% endblock %}
